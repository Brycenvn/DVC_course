schema: '2.0'
stages:
  data_load:
    cmd: python src/stages/data_load.py --config=params.yaml
    deps:
    - path: src/stages/data_load.py
      hash: md5
      md5: f3169382505373ee5c5cc020b00a83b5
      size: 1013
    params:
      params.yaml:
        base:
          log_level: INFO
          random_state: 42
        data_load:
          dataset_csv: data/raw/iris.csv
    outs:
    - path: data/raw/iris.csv
      hash: md5
      md5: 10f5f61b137fa708403ea5c480386bfe
      size: 2908
  featurize:
    cmd: python src/stages/featurize.py --config=params.yaml
    deps:
    - path: data/raw/iris.csv
      hash: md5
      md5: 10f5f61b137fa708403ea5c480386bfe
      size: 2908
    - path: src/stages/featurize.py
      hash: md5
      md5: 33ebdaddf0760c308ff20ca8292fe10b
      size: 1350
    params:
      params.yaml:
        base:
          log_level: INFO
          random_state: 42
        featurize:
          features_path: data/processed/featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/featured_iris.csv
      hash: md5
      md5: e3623a87a01908f403ea7e6260094f57
      size: 7411
  data_split:
    cmd: python src/stages/data_split.py --config=params.yaml
    deps:
    - path: data/processed/featured_iris.csv
      hash: md5
      md5: e3623a87a01908f403ea7e6260094f57
      size: 7411
    - path: src/stages/data_split.py
      hash: md5
      md5: e5aaf6d196b0547783acf4b12ef8eafe
      size: 1356
    params:
      params.yaml:
        base:
          log_level: INFO
          random_state: 42
        data_split:
          test_size: 0.2
          testset_path: data/processed/test_iris.csv
          trainset_path: data/processed/train_iris.csv
        featurize:
          features_path: data/processed/featured_iris.csv
          target_column: target
    outs:
    - path: data/processed/test_iris.csv
      hash: md5
      md5: 8ca0a17f1b6f79dbdfdb598484633e1e
      size: 1523
    - path: data/processed/train_iris.csv
      hash: md5
      md5: a2ec47f82aca318b8c0ff05879d1ee4f
      size: 5845
  train:
    cmd: python src/stages/train.py --config=params.yaml
    deps:
    - path: data/processed/train_iris.csv
      hash: md5
      md5: a2ec47f82aca318b8c0ff05879d1ee4f
      size: 5845
    - path: src/stages/train.py
      hash: md5
      md5: eb68f8d6532ab253d53e6c9e751984c4
      size: 1429
    params:
      params.yaml:
        base:
          log_level: INFO
          random_state: 42
        train:
          cv: 3
          estimator_name: svm
          estimators:
            logreg:
              param_grid:
                C:
                - 0.1
                - 1.0
                - 10
                max_iter:
                - 200
                solver:
                - lbfgs
            svm:
              param_grid:
                C:
                - 0.1
                - 1.0
                - 10
                degree:
                - 3
                - 5
                gamma:
                - scale
                kernel:
                - rbf
                - linear
          metrics_file: metrics.json
          model_path: models/model.joblib
          reports_dir: reports
    outs:
    - path: models/model.joblib
      hash: md5
      md5: b50fab11ff6aee28db72d14e99320391
      size: 9199
  evaluate:
    cmd: python src/stages/evaluate.py --config=params.yaml
    deps:
    - path: data/processed/test_iris.csv
      hash: md5
      md5: 8ca0a17f1b6f79dbdfdb598484633e1e
      size: 1523
    - path: models/model.joblib
      hash: md5
      md5: b50fab11ff6aee28db72d14e99320391
      size: 9199
    - path: params.yaml
      hash: md5
      md5: cd7f6529f8c4836e218dc724cf020ce3
      size: 967
    - path: src/stages/evaluate.py
      hash: md5
      md5: 7d60bfd50e963b5a5403e7b5b0c50c1d
      size: 3302
    outs:
    - path: reports/cm_plot.csv
      hash: md5
      md5: 268ba26b0add45a734667a9806bea9c3
      size: 606
    - path: reports/confusion_matrix.png
      hash: md5
      md5: bca8dcc1ecbd3accffc81db42b797d8f
      size: 24920
    - path: reports/metrics.json
      hash: md5
      md5: 3329ba1a6b18407f725a1e25a5500560
      size: 17
